<!DOCTYPE html>
<html lang="en">
  <!-- Mathjax Support -->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Quotidien</title>
  <meta name="description" content="Learning by teaching">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://dotkay.github.io/posts/20/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Quotidien" href="https://dotkay.github.io/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Quotidien">
  <meta name="twitter:description" content="Learning by teaching">
  
  

  
  
  <script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Bitter:400,700,400italic:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-105390377-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Quotidien</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/archives/">Posts</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">

  

  

  <ul class="post-list">
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/10/02/array-inversions-naive/">Computing the number of inversions in an array - naïve method &rarr;</a>
          </h1>

          <p class="post-meta">Oct 2, 2017 • 
  
  
    
  
    
  
    
  
    
      <a href="/categories/algorithms/">algorithms</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/c/">C++</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <p>Let us think about computing the number of inversions in an array. Let us also assume that our array has unique elements.</p>

<blockquote>
  <p>Two elements in an array <em>arr</em> form an inversion if <em>arr[i] &gt; arr[j]</em> for <em>i &lt; j</em>.</p>
</blockquote>

<p>For example, if <code class="language-plaintext highlighter-rouge">{2, 4, 1, 3, 5}</code> is our input array, it has 3 inversions <code class="language-plaintext highlighter-rouge">(2, 1), (4,1)</code> and <code class="language-plaintext highlighter-rouge">(4, 3)</code>. Let us look for a naïve straight-forward algorithm to solve this problem - i.e., traverse the array comparing the elements and checking if there is an inversion.</p>

<figure class="highlight">
  <pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">inv_count</span> <span class="p">(</span><span class="kt">int</span> <span class="n">arr</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">inv_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">inv_count</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">inv_count</span><span class="p">;</span>
  <span class="c1">// Time complexity: O(n^2) (two for loops)</span>
<span class="p">}</span></code></pre>
</figure>

<p>Inversion tells us how far the array is from being sorted. For a sorted array, the number of inversions is <code class="language-plaintext highlighter-rouge">0</code> and if the array is sorted in the other order it has maximum number of inversions.</p>

<p>But can we do better than <code class="language-plaintext highlighter-rouge">O(n^2</code>?</p>

        </div>
        
      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/10/01/array-query-sum-mo/">Computing sub-array sum given a set of queries on sub-array indices - Mo&#39;s Algorithm &rarr;</a>
          </h1>

          <p class="post-meta">Oct 1, 2017 • 
  
  
    
  
    
  
    
  
    
      <a href="/categories/algorithms/">algorithms</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/c/">C++</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <p>In the <a href="https://dotkay.github.io/2017/09/30/array-query-sum/">previous post</a>, we saw the naïve way of computing sub-array sums, given a set of queries. Now, following the hint provided in the previous post, let us try to think what would make it better.</p>

<p>First, let us try to understand it with an example. If we had an inpur array <code class="language-plaintext highlighter-rouge">a</code> and three queries of the form <code class="language-plaintext highlighter-rouge">{0, 3}</code>, <code class="language-plaintext highlighter-rouge">{4, 8}</code> and <code class="language-plaintext highlighter-rouge">{0, 8}</code>, we were independently computing <code class="language-plaintext highlighter-rouge">a[0] + a[1] + a[2] + a[3]</code>, <code class="language-plaintext highlighter-rouge">a[4] + a[5] + a[6] + a[7]</code> and <code class="language-plaintext highlighter-rouge">a[0] + a[1] + a[2] + a[3] + a[4] + a[5] + a[6] + a[7] + a[8]</code>. Although the sub-array sums we computed for the first two queries <code class="language-plaintext highlighter-rouge">{0, 3}</code> and <code class="language-plaintext highlighter-rouge">{4, 8}</code> could have just been reused instead of computing the sum all over again. Even in the case where the third query was of the form <code class="language-plaintext highlighter-rouge">{0, 10}</code> we could have used the results computed for the queries <code class="language-plaintext highlighter-rouge">{0, 3}</code> and <code class="language-plaintext highlighter-rouge">{4, 8}</code>. This also means that we need to compute the queries <code class="language-plaintext highlighter-rouge">{0, 3}</code> and <code class="language-plaintext highlighter-rouge">{4, 8}</code> so that we could reuse them for <code class="language-plaintext highlighter-rouge">{0, 8}</code> - i.e., if we computed <code class="language-plaintext highlighter-rouge">{0, 8}</code> first, we already lost the advantage. Which means that we need to order our queries in such a way that we compute the queries that have the potential to be reused before computing the other queries - in the above example <code class="language-plaintext highlighter-rouge">{0, 3}</code> and <code class="language-plaintext highlighter-rouge">{4, 8}</code>.</p>

<p>The ordering of queries themselves could be done in several ways. In this post, we shall look at one Mo’s algorithm that buckets the queries into a number of buckets which are a function of the size of the input array. If the input array is of size <code class="language-plaintext highlighter-rouge">n</code>, we put all the queries whose left index (<code class="language-plaintext highlighter-rouge">L</code>) ranges from 0 … \sqrt(n) -1 in the first bucket, (\sqrt n) … (2 * \sqrt(n) - 1), and so on. Within each bucket, we shall order the queries in increasing order of the right indices - the queries’ <code class="language-plaintext highlighter-rouge">R</code> values.</p>

<figure class="highlight">
  <pre><code class="language-cpp" data-lang="cpp"><span class="c1">// a, b : two Queries to be compared in order to sort</span>
<span class="kt">bool</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Query</span> <span class="n">a</span><span class="p">,</span> <span class="n">Query</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// first, sort by L if they are in different buckets</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">L</span><span class="o">/</span><span class="n">bucket</span> <span class="o">!=</span> <span class="n">b</span><span class="p">.</span><span class="n">L</span><span class="o">/</span><span class="n">bucket</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">L</span><span class="o">/</span><span class="n">bucket</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">L</span><span class="o">/</span><span class="n">bucket</span><span class="p">;</span>
  <span class="c1">// within the same bucket, queries are sorted</span>
  <span class="c1">// according to R values</span>
  <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">R</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">R</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</figure>

<p>Now, we need to adjust for over-lapping ranges in the queries. For example, if the previous (already computed) query was <code class="language-plaintext highlighter-rouge">{2, 5}</code> and the query that is currently being worked upon is <code class="language-plaintext highlighter-rouge">{4, 7}</code> then we need to discount <code class="language-plaintext highlighter-rouge">a[2]</code> and <code class="language-plaintext highlighter-rouge">a[3]</code> from the already computed sum (for <code class="language-plaintext highlighter-rouge">{2, 5}</code>) and also add <code class="language-plaintext highlighter-rouge">a[6]</code> and <code class="language-plaintext highlighter-rouge">a[7]</code> to it.</p>

<p>Very similarly, we may have to remove elements from the right as well (i.e. tracking the <code class="language-plaintext highlighter-rouge">R</code> indices). For example, if the previous range was <code class="language-plaintext highlighter-rouge">{0, 5}</code> and the current range <code class="language-plaintext highlighter-rouge">{2, 3}</code>, we need to discount <code class="language-plaintext highlighter-rouge">a[4]</code> and <code class="language-plaintext highlighter-rouge">a[5]</code> from the previous sum, as well (besides <code class="language-plaintext highlighter-rouge">a[0]</code> and <code class="language-plaintext highlighter-rouge">a[1]</code> which were taken care when we were handling L (previous paragraph)).</p>

<figure class="highlight">
  <pre><code class="language-cpp" data-lang="cpp"><span class="c1">// initialize the current L and R values</span>
<span class="kt">int</span> <span class="n">currL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">currR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// initialize an accumulator for the sum</span>
<span class="kt">int</span> <span class="n">curr_sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// iterate over the queries</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">L</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">L</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">R</span><span class="p">;</span>

  <span class="c1">// taking care of L</span>
  <span class="c1">// taking care of discarding</span>
  <span class="c1">// sub-parts from the sum</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">currL</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curr_sum</span> <span class="o">-=</span> <span class="n">a</span><span class="p">[</span><span class="n">currL</span><span class="p">];</span>
    <span class="n">currL</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// taking care of adding </span>
  <span class="c1">// sub-parts to the sum</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">currL</span> <span class="o">&gt;</span> <span class="n">L</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curr_sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">currL</span><span class="p">];</span>
    <span class="n">currL</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// taking care of R</span>
  <span class="c1">// adding elements to R</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">currR</span> <span class="o">&lt;=</span> <span class="n">R</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curr_sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">currR</span><span class="p">];</span>
    <span class="n">currR</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// discounting elements</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">currR</span> <span class="o">&gt;</span> <span class="n">R</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curr_sum</span> <span class="o">-=</span> <span class="n">a</span><span class="p">[</span><span class="n">currR</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="n">currR</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</figure>

<p>Let us run this on an example. Let us assume we are provided with an input array <code class="language-plaintext highlighter-rouge">a</code> which is <code class="language-plaintext highlighter-rouge">{ 1 2 3 1 1 2 4 1 3 4 2 1 2 3 4 1 1 3 4 2 3 2 1 2 3 }</code> of size 25 (<code class="language-plaintext highlighter-rouge">n</code>) and the following 8 (<code class="language-plaintext highlighter-rouge">m</code>) queries <code class="language-plaintext highlighter-rouge">(2,4) (1,7) (0,8) (5,8) (10,15) (12,16) (17,20) (18,21)</code>. Now, since <code class="language-plaintext highlighter-rouge">n</code> is 25, we need to put the queries with L values in the range 0 … \sqrt(n) -1 in the first bucket and so on. The first bucket, for example, would initially (arranged according to L values from 0..\sqrt(25) - 1), i.e. 0..4, will have the queries <code class="language-plaintext highlighter-rouge">(0, 8) (2, 4) (1, 7)</code> and then re-ordered as per their <code class="language-plaintext highlighter-rouge">R</code> values to <code class="language-plaintext highlighter-rouge">(2, 4) (1, 7) (0, 8)</code>. The other buckets are second: <code class="language-plaintext highlighter-rouge">(5,8)</code>, third: <code class="language-plaintext highlighter-rouge">(10, 15) (12, 16)</code>, fourth: <code class="language-plaintext highlighter-rouge">(17, 20) (18, 21)</code>.</p>

<p>Take some time to work through it. It would be worth the time to enhance the understanding.</p>

        </div>
        
      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/09/30/array-query-sum/">Computing sub-array sum given a set of queries on sub-array indices &rarr;</a>
          </h1>

          <p class="post-meta">Sep 30, 2017 • 
  
  
    
  
    
  
    
  
    
      <a href="/categories/algorithms/">algorithms</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/c/">C++</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <p>Let us discuss an interesting algorithm problem - finding sub-array sums in an array.</p>

<blockquote>
  <p>Given an array <code class="language-plaintext highlighter-rouge">a</code> and a set of queries <code class="language-plaintext highlighter-rouge">q</code> indicating ranges in an array, say sub-array indicies, how to compute the sum of the sub-array elements in the ranges specified in the query.</p>
</blockquote>

<p>In this post, we will discuss a very straightforward solution that traverses the array and the set of queries and computes the sum of each of the sub-arrays specified by the query bounds.</p>

<p>A query is just modelled as a <code class="language-plaintext highlighter-rouge">struct</code> specifying the left and right sub-array bounds by integers <code class="language-plaintext highlighter-rouge">L</code> and <code class="language-plaintext highlighter-rouge">R</code>. For example, <code class="language-plaintext highlighter-rouge">{3, 5}</code> would mean <em>sum the elements in the indicies 3, 4, 5 - i.e. a[3] + a[4] + a[5]</em></p>

<figure class="highlight">
  <pre><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nc">Query</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">;</span>
<span class="p">};</span></code></pre>
</figure>

<p>Now, let us walk through the queries one by one, and for each query, we shall traverse the array and pick up the elements in the indices specified by the query and sum them up. We initialize an accumulator <code class="language-plaintext highlighter-rouge">sum</code> and keep updating it for this purpose. Again, <code class="language-plaintext highlighter-rouge">a</code> is the input array of size <code class="language-plaintext highlighter-rouge">n</code>, and <code class="language-plaintext highlighter-rouge">q</code> is an array of queries and there are <code class="language-plaintext highlighter-rouge">m</code> queries in all.</p>

<figure class="highlight">
  <pre><code class="language-cpp" data-lang="cpp"><span class="c1">// walk through the queries one by one and </span>
<span class="c1">// get the query bounds</span>
<span class="c1">// Complexity: O(m)</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">L</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">L</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">R</span><span class="p">;</span>
  <span class="c1">// accumulator to collect the sum</span>
  <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// traverse the array and sum up the elements</span>
  <span class="c1">// within the query bounds</span>
  <span class="c1">// Complexity: O(n)</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">L</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;=</span><span class="n">R</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// Total Complexity: O(nm)</span></code></pre>
</figure>

<p>As you can see we have two loops - one within another and hence the total complexity is <em>O(mn)</em>. How can we make this naïve algorithm better? What do we look for? Hint: If I have queries one of which is a subset of another, we would end up computing the sum twice. For example, if two of our queries are <code class="language-plaintext highlighter-rouge">{0,4}</code> and <code class="language-plaintext highlighter-rouge">{1,3}</code>, by walking through all the queries and traversing the array for each query as above, we are not utilizing the fact that we could reuse the sub-array sum within <code class="language-plaintext highlighter-rouge">{1,3}</code> in the query <code class="language-plaintext highlighter-rouge">{0,4}</code> instead of recomputing them independently.</p>

        </div>
        
      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/09/29/analyzing-more-happiness-data/">More about Happiness... &rarr;</a>
          </h1>

          <p class="post-meta">Sep 29, 2017 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/data-analysis/">data analysis</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/python/">python</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <p>In our <a href="https://dotkay.github.io/2017/09/28/analyzing-happiness-data">previous post</a> we analyzed some happiness data. As I mentioned I got statistical figures for world regions on several parameters from Kaggle, for the years 2015, 2016 and 2017. We analyzed 2015 data in the last post. What confuses me now is how did they even come up with 2017 data (the year is not yet over). Or is this calendar also a confused one like tax calendars ;-)</p>

<p>In any case, let’s look at whatever was called 2017 data. I had to clean up the data-set as it had different names for some of the parameters, it had some differences in the countries (for example, South Sudan is the newest country and it appears in 2017 data-set, etc.). I renamed some of those fields, added the <code class="language-plaintext highlighter-rouge">Region</code> parameter comparing the countries against 2015 data-set, etc. There were still some discrepancies as data about some of the countries just does not exist in the 2017 data-set. The results we plotted in our previous post look more or less similar with the 2017 data as well. But I wanted to dig deeper and plot the happiness rankings of individual countries and here’s how it looked:</p>

<p><br />
<img src="/assets/images/data_science/happiness_world_countries_2017.png" alt="Happiness Rankings - Countries of the World" class="img=responsive" /></p>

<p>Not that I don’t want some of the countries to be unhappier, but some of the data points are counter-intuitive to my (perceived) knowledge of world regions. This is also a demonstration of my perceptions of different parts of the world and how many things can not just be captured in data. Some day, I would really want to dig into how this <code class="language-plaintext highlighter-rouge">Happiness Score</code> is computed and to check if it is meaningful at all.</p>

        </div>
        
      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/09/28/analyzing-happiness-data/">Thinking about Happiness... &rarr;</a>
          </h1>

          <p class="post-meta">Sep 28, 2017 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/data-analysis/">data analysis</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/python/">python</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <p>Lately, I have been pondering a lot about <a href="https://www.ted.com/talks/matthieu_ricard_on_the_habits_of_happiness">happiness</a> and satisfaction and so, let’s talk about it in a data-driven fashion. I downloaded some global data (for 2015, 2016, 2017) from <a href="https://www.kaggle.com/">Kaggle</a> that has several information on happiness, life expectancy, trust factor (essentially, a score of the perceived trust on the government), etc. Let’s start with 2015 data, as that’s what I analyzed first. Again, we will use <a href="https://pandas.pydata.org/">Pandas</a> library for data analysis and <a href="https://seaborn.pydata.org/">seaborn</a> library to plot the data and make our inference from the plots.</p>

<p>Let’s first plot the “Happiness Score” of the world regions and see which regions of the world are the happiest. And then, we shall plot the life expectancy of the regions of the world and see the correlation.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><span class="n">df_2015</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'2015.csv'</span><span class="p">)</span>
<span class="n">sns</span><span class="p">.</span><span class="n">swarmplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s">'Region'</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'Happiness Score'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_2015</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Region of the World'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Happiness Score'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">)</span></code></pre>
</figure>

<p>And here is what we see:
<br />
<img src="/assets/images/data_science/happiness_world_regions.png" alt="Happiness Scores - Regions of the World (2015)" class="img=responsive" /></p>

<p>Western Europe, North America, Australia and New Zealand lead the pack in happiness - why not? wealthy, rich economies, while Sub-Saharan Africa is not doing good - that’s sad. Now, let’s see how happiness is correlated to life expectancies in the the different parts of the world. A word of caution though: life expectancy actually depends on a variety of factors - epidemic, region conflicts, wars, poverty, etc. all contribute to life expectancy - but these factors also affect the happiness (to what precise extent? has someone measured? - I do not know).</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><span class="n">sns</span><span class="p">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s">'Health (Life Expectancy)'</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'Happiness Score'</span><span class="p">,</span> 
           <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_2015</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">'Region'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Life Expectancy'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Happiness Score'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">)</span></code></pre>
</figure>

<p>And here’s the result: 
<br />
<img src="/assets/images/data_science/happiness_vs_life_expectancy.png" alt="Happiness Scores and Life Expectancy (2015)" class="img=responsive" /></p>

<p>More on individual countries in a later post.</p>

        </div>
        
      </li>
    
  </ul>

  
  <div class="pagination">
    
      <a class="previous" href="/posts/21/">&laquo; Older</a>
    

    
      <a class="next" href="/posts/19/">Newer &raquo;</a>
    
  </div>



</div>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://dotkay.github.io/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
